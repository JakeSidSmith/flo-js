<!DOCTYPE html>
<html>
<head>
    <title>Flo-js</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <link rel="stylesheet" href="/css/master.css" media="screen" title="no title" charset="utf-8" />
    <script charset="utf-8" type="text/javascript" src="flo.js"></script>
    <script charset="utf-8" type="text/javascript">
        var canvasElement, canvas, cWidth, cHeight, person;

        var initialDate = new Date().getTime();

        var render = function () {
          canvas.clearRect(0, 0, cWidth, cHeight);
          canvas.strokeStyle = 'black';
          canvas.lineWidth = 4;

          canvas.save();
          canvas.translate(cWidth / 2, cHeight - 100);
          // Right leg
          canvas.save();
          canvas.rotate(person.position.upperRightLegRotation * Math.PI / 180);
          canvas.beginPath();
          canvas.moveTo(0, 0);
          canvas.lineTo(0, 50);
          canvas.closePath();
          canvas.stroke();
          // Lower right
          canvas.translate(0, 50);
          canvas.rotate(person.position.lowerRightLegRotation * Math.PI / 180);
          canvas.beginPath();
          canvas.moveTo(0, 0);
          canvas.lineTo(0, 50);
          canvas.closePath();
          canvas.stroke();
          canvas.restore();
          // Left leg
          canvas.save();
          canvas.rotate(person.position.upperLeftLegRotation * Math.PI / 180);
          canvas.beginPath();
          canvas.moveTo(0, 0);
          canvas.lineTo(0, 50);
          canvas.closePath();
          canvas.stroke();
          // Lower left
          canvas.translate(0, 50);
          canvas.rotate(person.position.lowerLeftLegRotation * Math.PI / 180);
          canvas.beginPath();
          canvas.moveTo(0, 0);
          canvas.lineTo(0, 50);
          canvas.closePath();
          canvas.stroke();
          canvas.restore();
          canvas.restore();

          canvas.restore();

          person.animation.animate();
          if (person.animation.currentAnimation === undefined) {
            var rightLegUp = person.animation.doAnimation('rightLegUp');
          }

          flo().requestAnimationFrame(render);
        };

        var init = function () {
          canvasElement = document.getElementById('canvas');
          canvas = canvasElement.getContext('2d');
          cWidth = canvasElement.width;
          cHeight = canvasElement.height;

          person = {
            position: {
              bodyRotation: 0,
              headRotation: 0,
              upperRightLegRotation: 0,
              lowerRightLegRotation: 0,
              upperLeftLegRotation: 0,
              lowerLeftLegRotation: 0,
            }
          };

          person.animation = flo(canvas, person.position);

          person.animation.addAnimation('rightLegForward',
            250,
            {
              bodyRotation: 0,
              headRotation: 0,
              upperRightLegRotation: -10,
              lowerRightLegRotation: 0,
              upperLeftLegRotation: 30,
              lowerLeftLegRotation: 55,
            },
            undefined,
            'leftLegUp'
          );

          person.animation.addAnimation('rightLegUp',
            250,
            {
              bodyRotation: 0,
              headRotation: 0,
              upperRightLegRotation: -40,
              lowerRightLegRotation: 50,
              upperLeftLegRotation: 20,
              lowerLeftLegRotation: 25,
            },
            undefined,
            'rightLegForward'
          );

          person.animation.addAnimation('leftLegForward',
            250,
            {
              bodyRotation: 0,
              headRotation: 0,
              upperRightLegRotation: 30,
              lowerRightLegRotation: 55,
              upperLeftLegRotation: -10,
              lowerLeftLegRotation: 0,
            },
            undefined,
            'rightLegUp'
          );

          person.animation.addAnimation('leftLegUp',
            250,
            {
              bodyRotation: 0,
              headRotation: 0,
              upperRightLegRotation: 20,
              lowerRightLegRotation: 25,
              upperLeftLegRotation: -40,
              lowerLeftLegRotation: 50,
            },
            undefined,
            'leftLegForward'
          );

          flo().requestAnimationFrame(render);
        };

        var enterFullscreen = function () {
          flo().enterFullscreen(document.getElementById('canvas'));
        };

        flo().onDocumentReady(init);
    </script>
</head>
<body>

    <div class="container">
        <h1>Flo-js</h1>

        <p>Animation library for use with HTML5 canvas</p>

        <canvas id="canvas" width="640" height="480"></canvas>

        <p>
            <button name="button" onclick="enterFullscreen()">Fullscreen</button>
        </p>
    </div>

</body>
</html>
